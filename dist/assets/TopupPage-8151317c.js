import{_ as T,D as R,r as i,J as h,o as C,b as l,f as c,g as e,j as d,H as k,F as P,y as N,v as f,l as F,z as B}from"./index-6e278184.js";import{a as D}from"./axios-21b846bc.js";const V={setup(){const _=R(),n=i([]),g=i([{id:1,name:"BRI"},{id:2,name:"Mandiri"},{id:3,name:"BCA"},{id:4,name:"BNI"}]),o=i(null),p=i(null),r=h({accountName:"",accountNumber:""}),t=h({accountName:"",accountNumber:"",transferAmount:"",notes:""}),b=i(null),v=i(null),y=()=>{if(o.value){const{atas_nama:a,nomor_rekening:s}=o.value;r.accountName=a,r.accountNumber=s}else r.accountName="",r.accountNumber=""},U=a=>{const s=a.target.files[0];if(v.value=s,s){const m=new FileReader;m.onload=u=>{b.value=u.target.result},m.readAsDataURL(s)}},w=async()=>{try{const a=await D.get("https://apibaba.lumirainternational.com/api/rekening/list",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});n.value=a.data.data}catch(a){console.error(a)}},x=()=>{_.go(-1)},A=async()=>{var s,m;const a=new FormData;a.append("bank_type",((s=p.value)==null?void 0:s.name)||""),a.append("bank_account_name",t.accountName),a.append("account_number",t.accountNumber),a.append("jumlah_transaksi",t.transferAmount),a.append("keterangan",t.notes),a.append("rekeningId",((m=o.value)==null?void 0:m.id)||""),a.append("bukti_transfer",v.value);try{const u=await D.post("https://apibaba.lumirainternational.com/api/auth/saldo/topup-saldo",a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"multipart/form-data"}});console.log(u.data),_.push("/home")}catch(u){console.error(u)}};return C(()=>{w()}),{bankPenerima:n,bankPengirim:g,selectedBankPenerima:o,selectedBankPengirim:p,receiverDetails:r,senderDetails:t,transferProof:b,updateReceiverDetails:y,handleFileUpload:U,goBack:x,submitTopUp:A}}},I={class:"container-fluid"},S={class:"row mt-3"},M={class:"col-3"},j=e("div",{class:"col-9"},[e("h6",{class:"fw-bold"},"Top-Up")],-1),z=e("h6",{class:"mt-3 fw-bold mt-4"},"Data Penerima",-1),J={class:"form-group mt-3"},L=e("label",{for:"selectBankPenerima"},"Pilih Bank",-1),E=e("option",{disabled:"",selected:""},"Pilih Bank",-1),H=["value"],q={class:"form-group mt-3"},G=e("label",{for:"accountNamePenerima"},"Atas Nama",-1),K=["value"],O={class:"form-group mt-3"},Q=e("label",{for:"accountNumberPenerima"},"Rekening",-1),W=["value"],X=e("hr",null,null,-1),Y=e("h6",{class:"mt-3 fw-bold mt-5"},"Data Pengirim",-1),Z={class:"form-group mt-3"},$=e("label",{for:"selectBankPengirim"},"Pilih Bank",-1),ee=["value"],te={class:"form-group mt-3"},oe=e("label",{for:"accountNamePengirim"},"Atas Nama",-1),ne={class:"form-group mt-3"},ae=e("label",{for:"accountNumberPengirim"},"Rekening",-1),se={class:"form-group mt-3"},re=e("label",{for:"transferAmount"},"Jumlah Transfer",-1),ie={class:"form-group mt-3"},le=e("label",{for:"notes"},"Catatan",-1),ce={class:"form-group mt-3"},de=e("label",{for:"transferProof"},"Bukti Transfer",-1),me={key:0,class:"mt-3"},ue=["src"],fe={class:"row mt-3"};function _e(_,n,g,o,p,r){return l(),c("div",I,[e("div",S,[e("div",M,[e("i",{class:"bi bi-arrow-left fs-3 text-dark fw-bold",onClick:n[0]||(n[0]=(...t)=>o.goBack&&o.goBack(...t))})]),j]),z,e("div",J,[L,d(e("select",{class:"form-control",id:"selectBankPenerima","onUpdate:modelValue":n[1]||(n[1]=t=>o.selectedBankPenerima=t),onChange:n[2]||(n[2]=(...t)=>o.updateReceiverDetails&&o.updateReceiverDetails(...t))},[E,(l(!0),c(P,null,N(o.bankPenerima,t=>(l(),c("option",{key:t.id,value:t},B(t.jenis_bank),9,H))),128))],544),[[k,o.selectedBankPenerima]])]),e("div",q,[G,e("input",{type:"text",class:"form-control",id:"accountNamePenerima",value:o.receiverDetails.accountName,readonly:""},null,8,K)]),e("div",O,[Q,e("input",{type:"text",class:"form-control",id:"accountNumberPenerima",value:o.receiverDetails.accountNumber,readonly:""},null,8,W)]),X,Y,e("div",Z,[$,d(e("select",{class:"form-control",id:"selectBankPengirim","onUpdate:modelValue":n[3]||(n[3]=t=>o.selectedBankPengirim=t)},[(l(!0),c(P,null,N(o.bankPengirim,t=>(l(),c("option",{key:t.id,value:t},B(t.name),9,ee))),128))],512),[[k,o.selectedBankPengirim]])]),e("div",te,[oe,d(e("input",{type:"text",class:"form-control",id:"accountNamePengirim","onUpdate:modelValue":n[4]||(n[4]=t=>o.senderDetails.accountName=t)},null,512),[[f,o.senderDetails.accountName]])]),e("div",ne,[ae,d(e("input",{type:"text",class:"form-control",id:"accountNumberPengirim","onUpdate:modelValue":n[5]||(n[5]=t=>o.senderDetails.accountNumber=t)},null,512),[[f,o.senderDetails.accountNumber]])]),e("div",se,[re,d(e("input",{type:"number",class:"form-control",id:"transferAmount","onUpdate:modelValue":n[6]||(n[6]=t=>o.senderDetails.transferAmount=t)},null,512),[[f,o.senderDetails.transferAmount]])]),e("div",ie,[le,d(e("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":n[7]||(n[7]=t=>o.senderDetails.notes=t)},null,512),[[f,o.senderDetails.notes]])]),e("div",ce,[de,e("input",{type:"file",class:"form-control",id:"transferProof",onChange:n[8]||(n[8]=(...t)=>o.handleFileUpload&&o.handleFileUpload(...t))},null,32),o.transferProof?(l(),c("div",me,[e("img",{src:o.transferProof,alt:"Bukti Transfer",class:"img-fluid"},null,8,ue)])):F("",!0)]),e("div",fe,[e("button",{type:"button",class:"btn btn-success w-100",onClick:n[9]||(n[9]=(...t)=>o.submitTopUp&&o.submitTopUp(...t))},"Submit")])])}const be=T(V,[["render",_e]]);export{be as default};
