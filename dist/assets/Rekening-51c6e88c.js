import{r as k,b as r,f as c,g as e,i as g,n as v,l as b,c as C,A as w,E as B,j as l,v as d,F as h,S as i,y as S,z as m}from"./index-f3958c5c.js";import{S as D}from"./Sidebar-cfc71f65.js";import{N as j,F as E}from"./Footer-d2253a62.js";import{a as u}from"./axios-21b846bc.js";import{P as p,D as A}from"./jquery.dataTables-6f813fd3.js";import"./logo-42795f0e.js";const N={id:"wrapper"},V={id:"content-wrapper",class:"d-flex flex-column"},U={id:"content"},F={class:"container-fluid mt-4"},z=e("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Rekening",-1),L=e("button",{type:"button",class:"btn btn-success mb-4 float-end","data-toggle":"modal","data-target":"#modalCreate"}," Add Rekening ",-1),T={class:"table-responsive"},I={key:0,class:"text-center"},J=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"No"),e("th",{scope:"col"},"Aksi"),e("th",{scope:"col"},"Jenis Bank"),e("th",{scope:"col"},"Atas Nama"),e("th",{scope:"col"},"Nomor Rekening")])],-1),x={scope:"row"},Y={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},q=["onClick"],M=e("i",{class:"bi bi-pencil-square"},null,-1),O=[M],P=["onClick"],G=e("i",{class:"bi bi-trash-fill"},null,-1),H=[G],K={class:"modal fade",id:"modalCreate",tabindex:"-1",role:"dialog","aria-labelledby":"modalCreateLabel","aria-hidden":"true",ref:"modalCreateRef"},Q={class:"modal-dialog",role:"document"},W={class:"modal-content"},X=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"modalCreateLabel"},"Add Rekening"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),Z={class:"modal-body"},ee={class:"form-group"},te=e("label",{for:"jenis_bank"},"Jenis Bank",-1),ne={class:"form-group"},ae=e("label",{for:"atas_nama"},"Atas Nama",-1),oe={class:"form-group"},se=e("label",{for:"nomor_rekening"},"Nomor Rekening",-1),ie={class:"modal-footer"},le=e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1),de={class:"modal fade",id:"modalEdit",tabindex:"-1",role:"dialog","aria-labelledby":"modalEditLabel","aria-hidden":"true",ref:"modalEditRef"},re={class:"modal-dialog",role:"document"},ce={class:"modal-content"},me=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"modalEditLabel"},"Edit Rekening"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1),ue={class:"modal-body"},ge={class:"form-group"},_e=e("label",{for:"edit_jenis_bank"},"Jenis Bank",-1),ke={class:"form-group"},be=e("label",{for:"edit_atas_nama"},"Atas Nama",-1),he={class:"form-group"},pe=e("label",{for:"edit_nomor_rekening"},"Nomor Rekening",-1),fe={class:"modal-footer"},ye=e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1),Re={data(){return{dataRekenings:[],selectedRekening:[],newRekening:{jenis_bank:"",atas_nama:"",nomor_rekening:""},ready:!1}},methods:{setDataUpdate(o){this.selectedRekening=o},async fetchDataRekening(){try{this.ready=!1;const o=await u.get("https://apibaba.lumirainternational.com/api/rekening/list",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.dataRekenings=o.data.data,this.ready=!0}catch(o){console.error(o)}},async createRekening(){try{const o=await u.post("https://apibaba.lumirainternational.com/api/rekening/create",this.newRekening,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.fetchDataRekening(),i.fire("Success","Rekening created successfully!","success"),this.newRekening={jenis_bank:"",atas_nama:"",nomor_rekening:""},$("#modalCreate").modal("hide")}catch(o){console.error(o),i.fire("Error","Failed to create rekening","error"),$("#modalCreate").modal("hide")}},async updateRekening(){try{await u.post(`https://apibaba.lumirainternational.com/api/rekening/update/${this.selectedRekening.id}`,this.selectedRekening,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}),this.fetchDataRekening(),i.fire("Success","Rekening updated successfully!","success"),$("#modalEdit").modal("hide"),this.selectedRekening=null}catch(o){console.error(o),$("#modalEdit").modal("hide"),i.fire("Error","Failed to update rekening","error")}},confirmDelete(o){i.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&this.deleteRekening(o)})},async deleteRekening(o){try{await u.delete(`https://apibaba.lumirainternational.com/api/rekening/delete/${o.id}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}),this.fetchDataRekening(),i.fire("Deleted!","Rekening has been deleted.","success")}catch(s){console.error(s),i.fire("Error","Failed to delete rekening","error")}}},created(){this.fetchDataRekening()}},je=Object.assign(Re,{__name:"Rekening",setup(o){p.use(A);const s=k(!1),_=k(""),f=()=>{s.value=!s.value,_.value=s.value?"toggle-sidebar":""};return(n,a)=>(r(),c(h,null,[e("div",N,[g(D,{class:v(_.value)},null,8,["class"]),e("div",V,[e("div",U,[g(j,{onToggleSidebar:f}),e("div",F,[z,L,e("div",T,[n.ready?b("",!0):(r(),c("div",I,"Loading...")),n.ready?(r(),C(B(p),{key:1,class:"display table table-striped"},{default:w(()=>[J,e("tbody",null,[(r(!0),c(h,null,S(n.dataRekenings,(t,y)=>(r(),c("tr",{key:t.id},[e("th",x,m(y+1),1),e("td",null,[e("div",Y,[e("button",{type:"button",class:"btn btn-warning","data-toggle":"modal","data-target":"#modalEdit",onClick:R=>n.setDataUpdate(t)},O,8,q),e("button",{type:"button",class:"btn btn-danger",onClick:R=>n.confirmDelete(t)},H,8,P)])]),e("td",null,m(t.jenis_bank),1),e("td",null,m(t.atas_nama),1),e("td",null,m(t.nomor_rekening),1)]))),128))])]),_:1})):b("",!0)])])]),g(E)])]),e("div",K,[e("div",Q,[e("div",W,[X,e("div",Z,[e("div",ee,[te,l(e("input",{type:"text",class:"form-control",id:"jenis_bank","onUpdate:modelValue":a[0]||(a[0]=t=>n.newRekening.jenis_bank=t)},null,512),[[d,n.newRekening.jenis_bank]])]),e("div",ne,[ae,l(e("input",{type:"text",class:"form-control",id:"atas_nama","onUpdate:modelValue":a[1]||(a[1]=t=>n.newRekening.atas_nama=t)},null,512),[[d,n.newRekening.atas_nama]])]),e("div",oe,[se,l(e("input",{type:"text",class:"form-control",id:"nomor_rekening","onUpdate:modelValue":a[2]||(a[2]=t=>n.newRekening.nomor_rekening=t)},null,512),[[d,n.newRekening.nomor_rekening]])])]),e("div",ie,[le,e("button",{type:"button",class:"btn btn-primary",onClick:a[3]||(a[3]=(...t)=>n.createRekening&&n.createRekening(...t))}," Save ")])])])],512),e("div",de,[e("div",re,[e("div",ce,[me,e("div",ue,[e("div",ge,[_e,l(e("input",{type:"text",class:"form-control",id:"edit_jenis_bank","onUpdate:modelValue":a[4]||(a[4]=t=>n.selectedRekening.jenis_bank=t)},null,512),[[d,n.selectedRekening.jenis_bank]])]),e("div",ke,[be,l(e("input",{type:"text",class:"form-control",id:"edit_atas_nama","onUpdate:modelValue":a[5]||(a[5]=t=>n.selectedRekening.atas_nama=t)},null,512),[[d,n.selectedRekening.atas_nama]])]),e("div",he,[pe,l(e("input",{type:"text",class:"form-control",id:"edit_nomor_rekening","onUpdate:modelValue":a[6]||(a[6]=t=>n.selectedRekening.nomor_rekening=t)},null,512),[[d,n.selectedRekening.nomor_rekening]])])]),e("div",fe,[ye,e("button",{type:"button",class:"btn btn-primary",onClick:a[7]||(a[7]=(...t)=>n.updateRekening&&n.updateRekening(...t))}," Save ")])])])],512)],64))}});export{je as default};
