import{r as _,b as i,f as r,g as a,i as h,n as k,l as n,c as P,A as D,E as w,z as d,x as C,j as c,v as m,F as f,S as u,y as j}from"./index-0e09ec2c.js";import{S as T}from"./Sidebar-8c0513f1.js";import{N as U,F}from"./Footer-ece463eb.js";import{a as b}from"./axios-21b846bc.js";import{P as y,D as B}from"./jquery.dataTables-22d44938.js";import"./logo-42795f0e.js";const A={id:"wrapper"},N={id:"content-wrapper",class:"d-flex flex-column"},V={id:"content"},x={class:"container-fluid mt-4"},I=a("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Program Sosial",-1),L=a("div",{class:"row mt-4"},[a("div",{class:"col-12"},[a("button",{class:"btn btn-success float-end","data-toggle":"modal","data-target":"#modalTambahProgram"}," Tambah Program ")])],-1),R={class:"table-responsive"},q={key:0,class:"preloader"},z=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"No"),a("th",{scope:"col"},"Aksi"),a("th",{scope:"col"},"Image"),a("th",{scope:"col"},"Judul"),a("th",{scope:"col"},"Saldo"),a("th",{scope:"col"},"Status")])],-1),J={scope:"row"},E={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},G=["onClick"],O=a("i",{class:"bi bi-info"},null,-1),M=[O],H=["onClick"],K=a("i",{class:"bi bi-pencil-square"},null,-1),Q=[K],W=a("button",{type:"button",class:"btn btn-danger"},[a("i",{class:"bi bi-trash-fill"})],-1),X=["src","alt","onClick"],Y={key:0,class:"bg-warning text-white rounded text-center"},Z={key:1,class:"bg-success text-white rounded text-center"},aa={class:"modal fade",id:"modalDetail",tabindex:"-1",role:"dialog","aria-labelledby":"modalDetailLabel","aria-hidden":"true",ref:"modalDetailRef"},sa={class:"modal-dialog modal-dialog-centered",role:"document"},ta={class:"modal-content"},ea=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"modalDetailLabel"}," Detail Program Sosial "),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1),oa={class:"modal-body"},la={class:"row"},ia={class:"col-md-4"},da=["src"],ra={class:"col-md-8"},na={class:"modal-title mb-3"},ca={class:"text-muted mb-3"},ma={class:"badge badge-success"},ua=a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ")],-1),ha={class:"modal fade",id:"modalTambahProgram",tabindex:"-1",role:"dialog","aria-labelledby":"modalTambahProgramLabel","aria-hidden":"true",ref:"modalTambahProgramRef"},ba={class:"modal-dialog modal-dialog-centered",role:"document"},pa={class:"modal-content"},ga=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"modalTambahProgramLabel"}," Tambah Program Sosial "),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1),_a={class:"modal-body"},fa={class:"mb-3"},ya=a("label",{for:"judul",class:"form-label"},"Image",-1),va={class:"mb-3"},Sa=a("label",{for:"judul",class:"form-label"},"Judul",-1),ka={class:"mb-3"},Pa=a("label",{for:"deskripsiSosial",class:"form-label"},"Deskripsi",-1),Da={class:"modal-footer"},wa=a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1),Ca={class:"modal fade",id:"modalUpdateSosial",tabindex:"-1",role:"dialog","aria-labelledby":"modalUpdateSosialLabel","aria-hidden":"true",ref:"modalUpdateSosialRef"},ja={class:"modal-dialog modal-dialog-centered",role:"document"},Ta={class:"modal-content"},Ua=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"modalUpdateSosialLabel"}," Update Program Sosial "),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1),$a={class:"modal-body"},Fa={class:"mb-3"},Ba=a("label",{for:"judul",class:"form-label"},"Image",-1),Aa={class:"mb-3"},Na=a("label",{for:"judul",class:"form-label"},"Judul",-1),Va={class:"mb-3"},xa=a("label",{for:"deskripsiSosial",class:"form-label"},"Deskripsi",-1),Ia={class:"modal-footer"},La=a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);y.use(B);const Ra={data(){return{dataSosial:[],dataselect:[],ready:!1,formProgram:[]}},methods:{setData(e){this.dataselect=e},async tambahProgram(){try{const e=new FormData;e.append("image",this.formProgram.image),e.append("judul",this.formProgram.judul),e.append("deskripsi",this.formProgram.deskripsi);const l=await b.post("https://apibaba.lumirainternational.com/api/sosial/create-sosial",e,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.fetchDataSosial(),u.fire({icon:"success",title:"Request Berhasil",text:"Program sosial berhasil diupdate"}),$("#modalTambahProgram").modal("hide")}catch(e){console.error(e),u.fire({icon:"error",title:"Request Gagal",text:"Pragram sosial gagal diupdate"}),$("#modalTambahProgram").modal("hide")}},async updateSosial(){try{const e=new FormData;e.append("image",this.dataselect.image),e.append("judul",this.dataselect.judul),e.append("deskripsi",this.dataselect.deskripsi);const l=await b.post(`https://apibaba.lumirainternational.com/api/sosial/update-sosial/${this.dataselect.id}`,e,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.fetchDataSosial(),u.fire({icon:"success",title:"Request Berhasil",text:"Program sosial berhasil diupdate"}),$("#modalUpdateSosial").modal("hide")}catch(e){console.error(e),u.fire({icon:"error",title:"Request Gagal",text:"Pragram sosial gagal diupdate"}),$("#modalUpdateSosial").modal("hide")}},async fetchDataSosial(){try{this.ready=!1;const l=(await b.get("https://apibaba.lumirainternational.com/api/sosial/my-program",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}})).data.data;this.dataSosial=Array.isArray(l)?l:[l],this.ready=!0,console.log("test",this.dataSosial)}catch(e){this.ready=!0,console.error(e)}},handleFileUpload(e){this.dataselect.image=e.target.files[0]},handleFileTambah(e){this.formProgram.image=e.target.files[0]}},created(){this.fetchDataSosial()}},Ma=Object.assign(Ra,{__name:"ProgramSosial",setup(e){const l=_(!1),p=_(""),v=()=>{l.value=!l.value,p.value=l.value?"toggle-sidebar":""};return(s,o)=>(i(),r(f,null,[a("div",A,[h(T,{class:k(p.value)},null,8,["class"]),a("div",N,[a("div",V,[h(U,{onToggleSidebar:v}),a("div",x,[I,L,a("div",R,[s.ready?n("",!0):(i(),r("div",q)),s.ready?(i(),P(w(y),{key:1,class:"display table table-striped"},{default:D(()=>[z,a("tbody",null,[(i(!0),r(f,null,j(s.dataSosial,(t,S)=>(i(),r("tr",{key:t.id},[a("th",J,d(S+1),1),a("td",null,[a("div",E,[a("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#modalDetail",onClick:g=>s.setData(t)},M,8,G),a("button",{type:"button",class:"btn btn-warning","data-toggle":"modal","data-target":"#modalUpdateSosial",onClick:g=>s.setData(t)},Q,8,H),W])]),a("td",null,[a("img",{src:"https://apibaba.lumirainternational.com"+t.image,alt:t.judul,style:{"max-width":"100px",cursor:"pointer"},onClick:g=>s.detailBukti(t.image)},null,8,X)]),a("td",null,d(t.judul),1),a("td",null,d(t.saldo?t.saldo:"0"),1),a("td",null,[t.status=="0"?(i(),r("div",Y," Nonaktif ")):n("",!0),t.status=="1"?(i(),r("div",Z," Aktif ")):n("",!0)])]))),128))])]),_:1})):n("",!0)])])]),h(F)])]),a("div",aa,[a("div",sa,[a("div",ta,[ea,a("div",oa,[a("div",la,[a("div",ia,[a("img",{src:"https://apibaba.lumirainternational.com"+s.dataselect.image,class:"img-fluid rounded",alt:"Program Sosial Image"},null,8,da)]),a("div",ra,[a("h5",na,"Judul: "+d(s.dataselect.judul),1),a("p",ca," Deskripsi: "+d(s.dataselect.deskripsi),1),a("p",null,"Owner: "+d(s.dataselect.owner_name),1),a("p",null,[C(" Status: "),a("span",ma,d(s.dataselect.status==1?"Aktif":"Pending"),1)])])])]),ua])])],512),a("div",ha,[a("div",ba,[a("div",pa,[ga,a("div",_a,[a("div",fa,[ya,a("input",{type:"file",class:"form-control",id:"image",onChange:o[0]||(o[0]=(...t)=>s.handleFileTambah&&s.handleFileTambah(...t))},null,32)]),a("div",va,[Sa,c(a("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":o[1]||(o[1]=t=>s.formProgram.judul=t)},null,512),[[m,s.formProgram.judul]])]),a("div",ka,[Pa,c(a("textarea",{class:"form-control",id:"deskripsiSosial",rows:"3","onUpdate:modelValue":o[2]||(o[2]=t=>s.formProgram.deskripsi=t)},null,512),[[m,s.formProgram.deskripsi]])])]),a("div",Da,[wa,a("button",{type:"submit",class:"btn btn-primary",onClick:o[3]||(o[3]=t=>s.tambahProgram())}," Simpan ")])])])],512),a("div",Ca,[a("div",ja,[a("div",Ta,[Ua,a("div",$a,[a("div",Fa,[Ba,a("input",{type:"file",class:"form-control",id:"image",onChange:o[4]||(o[4]=(...t)=>s.handleFileUpload&&s.handleFileUpload(...t))},null,32)]),a("div",Aa,[Na,c(a("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":o[5]||(o[5]=t=>s.dataselect.judul=t)},null,512),[[m,s.dataselect.judul]])]),a("div",Va,[xa,c(a("textarea",{class:"form-control",id:"deskripsiSosial",rows:"3","onUpdate:modelValue":o[6]||(o[6]=t=>s.dataselect.deskripsi=t)},null,512),[[m,s.dataselect.deskripsi]])])]),a("div",Ia,[La,a("button",{type:"submit",class:"btn btn-primary",onClick:o[7]||(o[7]=t=>s.updateSosial())}," Update ")])])])],512)],64))}});export{Ma as default};
