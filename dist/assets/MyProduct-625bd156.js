import{r as h,b as n,f as d,g as t,i as c,n as f,l as p,c as v,A as S,E as k,j as w,v as P,F as m,S as C,y as B,z as s}from"./index-0e09ec2c.js";import{S as D}from"./Sidebar-a39a0822.js";import{N as A,F as M}from"./Footer-ece463eb.js";import{a as u}from"./axios-21b846bc.js";import{P as _,D as x}from"./jquery.dataTables-22d44938.js";import"./logo-42795f0e.js";const T={id:"wrapper"},F={id:"content-wrapper",class:"d-flex flex-column"},N={id:"content"},z={class:"container-fluid mt-4"},L=t("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Price List",-1),V={class:"table-responsive"},j={key:0,class:"preloader"},q=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Action"),t("th",{scope:"col"},"Product"),t("th",{scope:"col"},"Category"),t("th",{scope:"col"},"Brand"),t("th",{scope:"col"},"Seller"),t("th",{scope:"col"},"Price"),t("th",{scope:"col"},"Margin"),t("th",{scope:"col"},"Stock"),t("th",{scope:"col"},"Desc")])],-1),I={scope:"row"},R={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},E=["onClick"],O=t("i",{class:"bi bi-pencil-square"},null,-1),H=[O],K=["onClick"],U=t("i",{class:"bi bi-trash-fill"},null,-1),G=[U],J={class:"modal fade",id:"modalMargin",tabindex:"-1",role:"dialog","aria-labelledby":"modalMarginLabel","aria-hidden":"true",ref:"modalMarginRef"},Q={class:"modal-dialog modal-dialog-centered",role:"document"},W={class:"modal-content"},X=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"modalMarginLabel"},"Atur Margin"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"Ã—")])],-1),Y={class:"modal-body"},Z={class:"mb-3"},tt=t("label",{for:"margin",class:"form-label"},"Margin",-1),et={class:"modal-footer"},at=t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);_.use(x);const ot={data(){return{dataProduct:[],dataSelected:[],user_id:"",ready:!1,remainingTime:"Loading"}},methods:{setData(e){this.dataSelected=e},async updateSosial(){try{const e=new FormData;e.append("buyer_sku_code",this.dataSelected.buyer_sku_code),e.append("margin",this.dataSelected.margin);const o=await u.post("https://apibaba.lumirainternational.com/api/product/margin-product",e,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});this.showAlert("Success","Margin product berhasil di atur","success"),this.fetchDataProduct()}catch(e){console.error(e),this.showAlert("Oops...","Terjadi kesalahan saat mengatur margin","error")}},async fetchDataProduct(){try{this.ready=!1;const e=await u.get("https://apibaba.lumirainternational.com/api/product/list-product",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.dataProduct=e.data.data,this.ready=!0}catch(e){this.ready=!0,console.error(e)}},confirmationDeleting(e){C.fire({title:"Konfirmasi Penghapusan",text:`Apakah Anda yakin ingin menghapus product ${e.product_name}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"red",cancelButtonColor:"grey",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&this.deleteProduct(e.id)})},deleteProduct(e){this.ready=!1,u.delete(`https://apibaba.lumirainternational.com/api/product/delete-product/${e}`,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.showAlert("Request Success","Product berhasil dihapus","success"),this.fetchDataProduct()}).catch(o=>{this.showAlert("Request Failed","Product gagal dihapus","error"),console.error(o),this.ready=!0})},showAlert(e,o,l){this.$swal({title:e,text:o,icon:l}).then(()=>{$("#modalMargin").modal("hide")})}},created(){this.fetchDataProduct()}},ct=Object.assign(ot,{__name:"MyProduct",setup(e){const o=h(!1),l=h(""),g=()=>{o.value=!o.value,l.value=o.value?"toggle-sidebar":""};return(r,i)=>(n(),d(m,null,[t("div",T,[c(D,{class:f(l.value)},null,8,["class"]),t("div",F,[t("div",N,[c(A,{onToggleSidebar:g}),t("div",z,[L,t("div",V,[r.ready?p("",!0):(n(),d("div",j)),r.ready?(n(),v(k(_),{key:1,class:"display table table-striped"},{default:S(()=>[q,t("tbody",null,[(n(!0),d(m,null,B(r.dataProduct,(a,b)=>(n(),d("tr",{key:a.id},[t("th",I,s(b+1),1),t("td",null,[t("div",R,[t("button",{type:"button",class:"btn btn-warning",onClick:y=>r.setData(a),"data-toggle":"modal","data-target":"#modalMargin"},H,8,E),t("button",{type:"button",class:"btn btn-danger",onClick:y=>r.confirmationDeleting(a)},G,8,K)])]),t("td",null,s(a.product_name),1),t("td",null,s(a.category),1),t("td",null,s(a.brand),1),t("td",null,s(a.seller_name),1),t("td",null,s(a.price),1),t("td",null,s(a.margin),1),t("td",null,s(a.stock),1),t("td",null,s(a.desc),1)]))),128))])]),_:1})):p("",!0)])])]),c(M)])]),t("div",J,[t("div",Q,[t("div",W,[X,t("div",Y,[t("div",Z,[tt,w(t("input",{type:"number",class:"form-control",id:"margin","onUpdate:modelValue":i[0]||(i[0]=a=>r.dataSelected.margin=a)},null,512),[[P,r.dataSelected.margin]])])]),t("div",et,[at,t("button",{type:"submit",class:"btn btn-primary",onClick:i[1]||(i[1]=a=>r.updateSosial())}," Simpan ")])])])],512)],64))}});export{ct as default};
